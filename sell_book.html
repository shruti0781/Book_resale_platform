<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sell Your Book</title>
  <link rel="stylesheet" href="sell_book.css" />
  <link rel="icon" href="https://uyc.thecenterforsalesstrategy.com/hubfs/21%20Books%20on%20Our%20Shelves%20for%20Personal%20and%20Professional%20Development.png" type="image/x-icon">
</head>
<body>
 <header>
    <div class="logo">üìö <strong>DAILY TIMES</strong></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="About us.html">About us</a>
      <a href="contact_us.html">Contact us</a>
      <a href="resale_login.html">Login</a>
    </nav>
    <section class="search-section">
  <h2>Search for Books</h2>
  <input type="text" id="bookSearch" placeholder="Enter book title..." />
  <button class="find">Find Book</button>
</section>

  </header>
<br>
<br>
  <form id="bookForm">
    <div>
      <label for="title">Book Title</label>
      <input type="text" id="title" name="title" placeholder="Enter book title" required>
    </div>

    <div>
      <label for="author">Author</label>
      <input type="text" id="author" name="author" placeholder="Author name" required>
    </div>

    <div>
      <label for="category">Category</label>
      <select id="category" name="category" required>
        <option value="Textbooks">Textbooks</option>
        <option value="Educational">Educational</option>
        <option value="Novels">Novels & Literature</option>
        <option value="Arts">Arts & Humanities</option>
        <option value="Reference">Reference</option>
        <option value="Self-help">Student Life & Self-help</option>
        <option value="Business">Business & Management</option>
        <option value="Science">Science & Technology</option>
      </select>
    </div>

    <div>
      <label for="condition">Condition</label>
      <select id="condition" name="condition" required>
        <option value="New">New</option>
        <option value="Used - Like New">Used - Like New</option>
        <option value="Used - Good">Used - Good</option>
        <option value="Used - Acceptable">Used - Acceptable</option>
      </select>
    </div>

    <div>
      <label for="price">Price ($)</label>
      <input type="number" id="price" name="price" placeholder="e.g. 15.99" required>
    </div>

    <div>
      <label for="image">Upload Book Image</label>
      <input type="file" id="image" name="image" accept="image/*">
    </div>

    <div>
      <label for="description">Book Description</label>
      <textarea id="description" name="description" rows="5" placeholder="Tell buyers about this book..." required></textarea>
    </div>

    <button type="submit">üì§ Submit Your Listing</button>
  </form>

  <div id="loading" class="loading">Fetching book details... ‚è≥</div>

  <footer>
    <a href="#">Privacy Policy</a> |
    <a href="#">Terms of Service</a> |
    <a href="#">Contact</a>
    <p>&copy; 2025 Daily Times. All Rights Reserved.</p>
  </footer>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script>
const fileInput = document.getElementById("image");
const titleInput = document.getElementById("title");
const authorInput = document.getElementById("author");
const descriptionInput = document.getElementById("description");
const loading = document.getElementById("loading");

loading.style.display = "none";

fileInput.addEventListener("change", function() {
  const file = this.files[0];
  if (!file) return;

  const imageUrl = URL.createObjectURL(file);
  loading.style.display = "block";
  loading.textContent = "üìñ Scanning book cover for text... please wait.";

  Tesseract.recognize(imageUrl, 'eng', { logger: info => console.log(info) })
  .then(({ data: { text } }) => {
    // Clean and split text into lines
    const lines = text
      .split("\n")
      .map(line => line.trim())
      .filter(line => line.length > 0 && !line.match(/ISBN|edition|press|copyright|book|cover/i));

    console.log("Extracted lines:", lines);

    let title = "Unknown Title";
    let author = "Unknown Author";

    // Try to assign first two lines sensibly
    if (lines.length > 0) title = lines[0];
    if (lines.length > 1) author = lines[1];

    // Fill fields
    titleInput.value = title;
    authorInput.value = author;

    // Auto-fill description
    descriptionInput.value = `‚Äú${title}‚Äù by ${author} is a fascinating read that deserves a place on every bookshelf. Dive into its pages to explore a unique story and enriching ideas.`;

    loading.textContent = "‚úÖ Text recognized successfully!";
    setTimeout(() => (loading.style.display = "none"), 2000);
  })
  .catch(err => {
    console.error(err);
    loading.textContent = "‚ùå Could not read text from image.";
    setTimeout(() => (loading.style.display = "none"), 3000);
  });
});
</script>
</body>
</html>
